# Docker å®¹å™¨æ•°æ®å·



## ä¸‰ç§æ•°æ®æŒ‚è½½æ–¹å¼

1. **volumesï¼š** Dockerç®¡ç†å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†  â€¼ï¸ **æœ€å¸¸ç”¨çš„æ–¹å¼**
2. **bind mountsï¼š** æ„ä¸ºç€å¯ä»¥å­˜å‚¨åœ¨å®¿ä¸»æœºç³»ç»Ÿçš„ä»»æ„ä½ç½® ğŸŒ› **è¾ƒå¸¸ç”¨**

> ä½†æ˜¯ï¼Œbind mountåœ¨ä¸åŒçš„å®¿ä¸»æœºç³»ç»Ÿæ—¶ä¸å¯ç§»æ¤çš„ï¼Œæ¯”å¦‚Windowså’ŒLinuxçš„ç›®å½•ç»“æ„æ˜¯ä¸ä¸€æ ·çš„ï¼Œbind mountæ‰€æŒ‡å‘çš„hostç›®å½•ä¹Ÿä¸èƒ½ä¸€æ ·ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆbind mountä¸èƒ½å‡ºç°åœ¨Dockerfileä¸­çš„åŸå› ï¼Œå› ä¸ºè¿™æ ·Dockerfileå°±ä¸å¯ç§»æ¤äº†ã€‚

3. **tmpfsï¼š** æŒ‚è½½å­˜å‚¨åœ¨å®¿ä¸»æœºç³»ç»Ÿçš„å†…å­˜ä¸­ï¼Œè€Œä¸ä¼šå†™å…¥å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿ  âš ï¸ **ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šä½¿ç”¨**

<img src="http://cdn.wangdaoo.com/image-20210827100136654.png" alt="image-20210827100136654" style="zoom:50%;" />



## ä»€ä¹ˆæ˜¯å®¹å™¨æ•°æ®å·ï¼Ÿ

> ç›®å½•æŒ‚è½½ï¼æ•°æ®æŒä¹…åŒ–å’ŒåŒæ­¥åŒ–ï¼å¤šä¸ªå®¹å™¨å¯ä»¥æ•°æ®å…±äº«



## ä½ç½®

```bash
# æ•°æ®å·ä½ç½®
cd /var/lib/docker/volumes
```

![image-20210827095110641](http://cdn.wangdaoo.com/image-20210827095110641.png)

> ç”±äºæ²¡æœ‰åœ¨åˆ›å»ºæ—¶æŒ‡å®šå·ï¼Œæ‰€ä»¥ Docker å¸®æˆ‘ä»¬é»˜è®¤åˆ›å»ºäº†è®¸å¤šåŒ¿åå·





## ä½¿ç”¨æ•°æ®å·



**æ–¹å¼1ï¼šä½¿ç”¨ -v æŒ‚è½½**

```bash
# è¿›å…¥å®¹å™¨
docker run -it -v /home/test:/home [é•œåƒID] bash

# ä¸è¿›å…¥å®¹å™¨
docker run -d -v /home/test:home [é•œåƒID]

# æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯
docker inspect [å®¹å™¨ID]
```

![image-20210820225319510](http://cdn.wangdaoo.com/image-20210820225319510.png)



**éªŒè¯æ•°æ®æ˜¯å¦åŒæ­¥**

![image-20210820225956859](http://cdn.wangdaoo.com/image-20210820225956859.png)



## å®æˆ˜ - åŒæ­¥MySql



**æ€è€ƒï¼šæ•°æ®æŒä¹…åŒ–**

```bash
# æœç´¢
docker search mysql

# ä¸‹è½½
docker pull mysql

# å¯åŠ¨å®¹å™¨
# -d åå°è¿è¡Œ
# -p ç«¯å£æ˜ å°„
# -v æ•°æ®å·æŒ‚è½½
# -e ç¯å¢ƒé…ç½®
# --name å®¹å™¨åç§°
docker run -d -p 3306:3306 -v /home/mysql/conf:/etc/mysql/conf.d -v /home/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name [å®¹å™¨å] [é•œåƒID]

# Navicat æµ‹è¯•è¿æ¥
# ç”¨æˆ·åï¼šroot
# å¯†ç ï¼š123456
```



## å…·åæŒ‚è½½ & åŒ¿åæŒ‚è½½

```bash
# åŒ¿åæŒ‚è½½
-v å®¹å™¨å†…è·¯å¾„

# å…·åæŒ‚è½½
-v å·å:å®¹å™¨å†…è·¯å¾„

# æŒ‡å®šè·¯å¾„æŒ‚è½½
-v /å®¿ä¸»æœºè·¯å¾„:/å®¹å™¨å†…è·¯å¾„
```



## æ‹“å±•

```bash
# roï¼šreadonly      - åªè¯»
docker run -d -v /home/test:home:ro [é•œåƒID]

# rw: readwrite     - å¯è¯»å¯å†™
docker run -d -v /home/test:home:rw [é•œåƒID]
```

